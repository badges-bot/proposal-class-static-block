<emu-clause id="sec-environment-records" oldids="sec-lexical-environments">
  <h1>Environment Records</h1>
  <emu-clause id="sec-the-environment-record-type-hierarchy">
    <h1>The Environment Record Type Hierarchy</h1>
    <p>Environment Records can be thought of as existing in a simple object-oriented hierarchy where Environment Record is an abstract class with three concrete subclasses: declarative Environment Record, object Environment Record, and global Environment Record. Function Environment Records and module Environment Records are subclasses of declarative Environment Record.</p>
    <ul>
      <li>
        <p>Environment Record (abstract)</p>
        <ul>
          <li>
            <p>A <em>declarative Environment Record</em> is used to define the effect of ECMAScript language syntactic elements such as |FunctionDeclaration|s, |VariableDeclaration|s, and |Catch| clauses that directly associate identifier bindings with ECMAScript language values.</p>
            <ul>
              <li>
                <p>A <em>function Environment Record</em> corresponds to the invocation of an ECMAScript function object, and contains bindings for the top-level declarations within that function. It may establish a new `this` binding. It also captures the state necessary to support `super` method invocations.</p>
              </li>
              <li>
                <p><ins>A <em>class static block Environment Record</em> corresponds to the evaluation of a static initialization block in a class. A class static block environment establishes a new `this` binding. It also captures the necessary state to support `super` method invocations.</ins></p>
              </li>
              <li>
                <p>A <em>module Environment Record</em> contains the bindings for the top-level declarations of a |Module|. It also contains the bindings that are explicitly imported by the |Module|. Its [[OuterEnv]] is a global Environment Record.</p>
              </li>
            </ul>
          </li>
          <li>
            <p>An <em>object Environment Record</em> is used to define the effect of ECMAScript elements such as |WithStatement| that associate identifier bindings with the properties of some object.</p>
          </li>
          <li>
            <p>A <em>global Environment Record</em> is used for |Script| global declarations. It does not have an outer environment; its [[OuterEnv]] is *null*. It may be prepopulated with identifier bindings and it includes an associated global object whose properties provide some of the global environment's identifier bindings. As ECMAScript code is executed, additional properties may be added to the global object and the initial properties may be modified.</p>
          </li>
        </ul>
      </li>
    </ul>
  </emu-clause>
</emu-clause>

<emu-clause id="sec-class-static-block-environment-records">
  <h1><ins>Class Static Block Environment Records</ins></h1>
  <p>A <dfn>class static block Environment Record</dfn> is a declarative Environment Record that is used to represent the top-level scope of a class static block and provides a `this` binding.</p>
  <p>Class Static Block Environment Records have the additional state fields listed in <emu-xref href="#table-class-static-block"></emu-xref>.</p>
  <emu-table id="table-class-static-block" caption="Additional Fields of Class Static Block Environment Records">
    <table>
      <tbody>
      <tr>
        <th>
          Field Name
        </th>
        <th>
          Value
        </th>
        <th>
          Meaning
        </th>
      </tr>
      <tr>
        <td>
          [[ThisValue]]
        </td>
        <td>
          Any
        </td>
        <td>
          This is the *this* value used for this invocation of the `static` block.
        </td>
      </tr>
      <tr>
        <td>
          [[ThisBindingStatus]]
        </td>
        <td>
          ~initialized~ | ~uninitialized~
        </td>
        <td>
        </td>
      </tr>
      <tr>
        <td>
          [[FunctionObject]]
        </td>
        <td>
          Object
        </td>
        <td>
          The function object for a class whose static block evaluation caused this Environment Record to be created.
        </td>
      </tr>
      <tr>
        <td>
          [[HomeObject]]
        </td>
        <td>
          Object | *undefined*
        </td>
        <td>
          If the associated `static` block has `super` property accesses, [[HomeObject]] is the object that the `static` block is bound to when evaluated. The default value for [[HomeObject]] is *undefined*.
        </td>
      </tr>
      </tbody>
    </table>
  </emu-table>
</emu-clause>

<emu-clause id="sec-environment-record-operations">
  <h1>Environment Record Operations</h1>
  <emu-clause id="sec-newclassstaticblockenvironment" aoid="NewClassStaticBlockEnvironment">
    <h1><ins>NewClassStaticBlockEnvironment ( _F_ )</ins></h1>
    <p>The abstract operation NewClassStaticBlockEnvironment takes argument _F_. It performs the following steps when called:</p>
    <emu-alg>
      1. Assert: _F_ is an ECMAScript function.
      1. Let _env_ be a new Class Static Block Environment Record containing no bindings.
      1. Set _env_.[[FunctionObject]] to _F_.
      1. Set _env_.[[ThisBindingStatus]] to ~uninitialized~.
      1. Set _env_.[[HomeObject]] to _F_.[[HomeObject]].
      1. Set _env_.[[OuterEnv]] to _F_.[[Environment]].
      1. Return _env_.
    </emu-alg>
  </emu-clause>
</emu-clause>